# 開發日誌
### MyselfAnimeDownloader WebUI開發日誌，最後更新日期`2023/01/08`
> 這是我第一次寫開發日誌，如果有不清楚的地方還請見諒。
---

<style>
    p {
        text-indent: 2em;
    }
</style>

## TODO Summary
> 詳細下一次做甚麼會寫在每次更新的日誌中

1. 新增單元測試(Unit Testing)
2. ~~新增m3u8下載器~~ 2022/12/28
3. 移植Web UI
4. 後端重構
5. 連結SQL Database紀錄下載
6. ~~新增貯列管理器~~ 2023/01/01
7. WebSocket Server
8. 行動版專有頁面(放棄做RWD了XD

---

## 2023/01/09
```
---Log---
1. 修正Web UI動畫資料顯示問題
2. 修正Myself Method中search語法錯誤(CSS Selector)
3. M3U8下載失誤自動修正新增檢查條件-檔案完整度
4. Web UI每周列表完成。
```

---

## 2023/01/08
```
---Log---
1. 修正Myself method中finish_list與search運行邏輯。
2. 修正M3U8.py中gen_dir_name函式變數誤植。
3. Web UI搜尋列表完成。
4. Web UI動畫資料頁完成。
5. Web UI設定頁完成。
6. Web UI搜尋功能完成。
7. Web UI下載功能完成完成。
8. Web UI貯列操作完成。
9. 將原本於Dashboard中API單獨拉出來做為一個Module，方便日後其他介面使用。

# 基本上算是能用了

---TODO Detail---
1. Web UI網頁播放器
2. Web UI每周更新列表
3. Web UI動畫年表
4. 定時檢查動畫更新
```
### 2023/01/08 Dev's Diary
感覺好久沒有寫UpdateLog了，上一次寫已經是6天前了，這段時間對後端基本沒什麼改，主要都在做UI，感覺現在寫起來比較輕鬆一些，之前做的都是一直疊Element去排版，維護起來好累。

至於後端的部分，主要是在今天發現了Myself Method中的finish_list跟search一直都是用一般的邏輯再跑，抓完一頁資料再去請求下一頁，完全沒利用到非同步的優點😓，今天把他改正了，透過先把會用到的頁面都抓下來再去分析資料。

在前後端嫁接的部分，Flask的SocketIO果然還是好難理解，自己重寫一組好了😂。

是說好像剩不到十天就要學測了，還好我特選上了😆，~~雖然也因此被找去分享經驗~~，看其他人在那裡準備好辛苦，在這裡祝福他們都能考上自己的志願~~希望有人來成大資工陪我XD~~。

---

## 2023/01/02
```
---Log---
1. 修正Myself method中finish_list的部分應為year_list。
2. 新增Myself method - finish_list。
3. 更新Myself的單元測試。
4. Web UI主頁完成。
5. API查詢貯列功能完成
6. 貯列管理器功能完成。
```
### 2023/01/02 Dev's Diary
今天(1/1)睡到早上11點才起床，好久沒睡到這麼晚了。

---

## 2023/01/01
```
---Log---
1. M3U8下載器錯誤重試功能完成。
2. 新增移除暫存資料夾中空資料夾的功能。
3. 改變檢查資料夾是否存在的時機。
4. M3U8下載器暫停功能完成。
5. 新增貯列管理器。
```
### 2023/01/01 Dev's Diary
要跨年了~今天好累，下午想說去躺一下，結果就睡到晚上了😂。

最近感覺沒做甚麼事，寫不出甚麼東西，昨天把影片弄成VS Code的背景了，效果還行，然後網頁的部分，第一次做黑白主題切換，發現很好看😆。

今天在測試的時候，差一點把整個Dashboard都刪掉，還好有Git，第一次發現Git的方便。(還有5個小時跨年)

貯列管理器做好啦~比想像中的還要順利，而且也比較穩定，今天寫上TODO的東西今天就做完了😀。(還有3個小時跨年)

新年快樂~~ 現在時間是2023/01/01 00:49，晚安。

---

## 2022/12/28
```
---Log---
1. async_io/async_requests中new_session的Timeout修改為conn_timeout
2. 補上modules/m3u8.py的註解。
3. myself.py單元測試完成。
4. 修正資料抓取效率。
5. 修正Websocket傳送的資料。
6. M3U8下載器完成。

# 核心功能重構得差不多了。

```
### 2022/12/28 Dev's Diary
M3U8下載器完成了，主要是找到請求資料需要在標頭中增加`"referer": "https://v.myself-bbs.com/"`，然後居然花了一節課在處理Stream的問題，結果只是因為Session被關掉了😂。

昨天丁丁說Python的List在append的時候，用`data_ = data.append;data_("")`會比較快，太酷了吧。

今天晚上都在處理測試檔被誤Commit的問題😆，最後是參考[這篇文章](https://blog.darkthread.net/blog/rm-files-from-git-history/)解決的。

今天中午又吃雞肉飯😑。

現在時間是2022/12/28 23:56 先這樣吧，好像睡覺，寫程式的精神消耗比想像中的大。

---

## 2022/12/25
```
---Log---
1. myself.py重構完成。
2. 將Myself method更改為非同步(async)。
3. 新增MyselfAnime類別，用以儲存每一個影片的資料(tid, vid, m3u8_url)。
4. 新增MyselfAnimeTable類別，用以儲存動畫資料(網址, 名稱, 資料...)。
5. 導入自製通用模組modules.json。
6. 導入自製通用模組modules.threading_。
7. 導入自製通用模組configs.logging_config。
8. 導入自製通用模組configs.config。
9. config.py設定內容修改完成。
10.新增async_io.async_requests.py，用以發送非同步請求。
11.新增READMD.md
12.新增UpdateLog.md
13.將debug.html加到.gitignore

---TODO Detail---
1. 單元測試
2. m3u8下載器
```
### 2022/12/25 Dev's Diary
這裡預計會寫兩次更新之間的一些瑣事，就像日記那樣。

前幾天剛看完八目迷的"在昨日的春天等待你"，很好看，描寫很細膩，雖然幾乎沒有插圖，但是能夠想像出畫面，值得入手。

前天下午把實驗室的音源線重新接回去了，還好有學長留下來的3.5mm插孔座，然後第一次用那把新來的電烙鐵，超好用，焊錫很快就融了，重接線大概3分鐘而已。是說實驗室裡居然連焊錫都找不到，也是很扯，其他找不到的還有各種杜邦線跟3.5mm音源線，找東西就找了快一個小時😑。

昨天在做動態語音機器人，其實還有一點沒做完，但我覺得剩下的功能沒有到很必要就暫時停止了，所以那邊其實可以算是告一段落了😆。

今天是聖誕節(但我只有一個人QQ)，凌晨的孤獨搖滾正常播出了，感謝巴哈，不然原本要等到禮拜一，可是這是最後一集了，我需要第二季😭。

早上起來，天氣一樣很冷，早上9點多起床就開始重啟這個專案了(怎麼那麼可悲)，前陣子Myself宣布恢復營運了，所以這個專案又有了存在的意義，這也是在看完O'REILLY那本Python非同步教學之後，第一次用在實作，雖然它的翻譯寫的很文言，但多少都還是有幫助的。

明天又要上課了，早上的公假還沒請好，不知道會不會又有一堆不知道從哪裡來的模考要寫🙃，多寫又不會多一級分，而且又不是每個人都要採計全科，真的搞不懂他在想什麼欸。

好啦，這一次就先到這裡，好像有點太多了😂，之後應該不會有這麼多，就這樣吧，現在時間是2022/12/25 23:09分，晚安。
